<!--
* @file index.html
* @author Ali Sarrafi
*
* Template application that provides Native UI functionality from
* HTML5 aand JavaScript.
*
* The entire UI and application logic can be implemented
* in JavaScript.
* Please refer to the Wiki Page for more documentation
-->

<!DOCTYPE html>

<html>

<head>

<!-- Import MoSync Constants Library. -->
<script src="js/maapi.js"></script>

<!-- Import the bridge library. -->
<script src="js/mosync-bridge.js"></script>

<!-- Import Native UI Library. -->
<script src="js/mosync-nativeui.js"></script>

<!-- Import Resource Handler. -->
<script src="js/mosync-resource.js"></script>



<script language="JavaScript">
	/**
	* Handles key press events,
	* Refer to Mosync documentation for key code details
	*/
	function keyPressEvent(keyCode) {
		//Close the Application if the Back key is pressed
		if(keyCode == MoSyncConstants.MAK_BACK) {
			// Call close to exit the application.
			mosync.bridge.send([
				"close"
			], null);
		}
	}

	/**
	* Handles events generated by the button.
	* See the markup for more usage
	* Two Extra parameters are passed to event handlers
	* - WidgetHandle MoSync handle for the widget
	* - eventType type of the event triggered
	*/
	function handleButtonEvent(message) {
		console.log('You Clicked the Button');
	}

	var numclicked = 0;

	/**
	* A simple function that updateds a label on screen
	*/
	function changeLabel()
	{
			var myLabel = document.getNativeElementById("myLabel");

			//set the text property of our label.
			myLabel.setProperty(
					"text",
					"No. of Clicks: " + (++numclicked));
	}

	/**
	* Event comming from the library indicating the UI is ready to be shown
	* We override the default operation of the library to add some new functionality.
	*/
	mosync.nativeui.UIReady = function()
	{
		//First get an instance of the scree nwe want to show
		var mainScreen = document.getNativeElementById("mainScreen");
		//show the screen
		mainScreen.show();

		//Get an instacne of the button created in the markup
		var myButton = document.getNativeElementById("myButton");
		//add an event listener to it
		myButton.addEventListener("Clicked", changeLabel);


		//Create a new button and add an event listener to it
		var secondButton = mosync.nativeui.create("Button" ,"SecondButton",
		{
			//properties of the button
			"width": "100%",
			"text": "Second Button"
		});
		myButton.setProperty("fontColor", "0xfffffff");
		secondButton.addTo("mainLayout");
		secondButton.addEventListener("Clicked", function()
		{
			alert("second button is cliecked");
		});
	}

	/**
	* Initialize the mosync.nativeui System
	*/
	function initialize()
	{
		mosync.nativeui.initUI();
	}
</script>

</head>

<body  onload="initialize()">
	<!-- All of the mosync.nativeui widgets should be wraped inside a tag with id="mosync.nativeui" -->
	<div id="NativeUI">
		<!-- the element with id="mainScreen" is loaded to the device screen  by default -->
		<div widgetType="TabScreen" id="mainScreen">
			<div widgetType="Screen" id="firstScreen" title="Web Screen" icon_android="img/TabIconWebViewAndroid.png" icon_iOS="img/TabIconWebView.png" >
				<div widgetType="WebView" id="WebBrowser" width="100%" height="100%" url="http://www.google.com"></div>
			</div>
			<div widgetType="Screen" id="SecondScreen" title="Widget Screen">
				<div widgetType="VerticalLayout" id="mainLayout" width="-1" height="-1">
					<div widgetType="Label" id="myLabel" width="100%" text="Here is a Label" fontSize="19" fontColor="0xEE3B3B"></div>
					<div widgetType="Button" id="myButton" width="100%" text="Click !" ></div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
